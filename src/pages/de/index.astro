---
import Layout from '../../layouts/Layout.astro';
import { getLangFromUrl, useTranslations, getNavLink } from '../../utils/i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title={t('site.title')} description={t('meta.home.description')}>
  <!-- Hero Section -->
  <section class="section section-hero">
    <div class="container">
      <div class="hero-content fade-in">
        <h1 class="hero-title">{t('hero.title')}</h1>
        <p class="hero-subtitle text-large">{t('hero.subtitle')}</p>
        <div class="hero-actions">
          <a href={getNavLink('contact', lang)} class="btn">{t('hero.cta')}</a>
          <a href={getNavLink('faq', lang)} class="btn btn-secondary">{t('hero.cta.secondary')}</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Video-Pr√§sentation Abschnitt -->
  <section class="section section-video-presentation">
    <div class="container text-center">
      <h2 style="margin-bottom:1rem;">Entdecken Sie Espai.ai in Aktion</h2>
      <p style="margin-bottom:2rem;">Sehen Sie sich unser Video an und erfahren Sie, wie Espai.ai Ihr Unternehmen mit KI-gest√ºtzter Automatisierung transformieren kann.</p>
      <div class="video-placeholder" style="display:flex; justify-content:center;">
        <!-- Lazy-loaded YouTube video -->
        <div id="youtube-placeholder" class="youtube-placeholder" style="width: 560px; height: 315px; background: linear-gradient(135deg, #06b6d4, #3b82f6); border-radius: 16px; display: flex; align-items: center; justify-content: center; cursor: pointer; position: relative; overflow: hidden;">
          <div style="text-align: center; color: white; z-index: 2;">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor" style="margin-bottom: 1rem;">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            <h3 style="margin: 0; font-size: 1.5rem;">Demo-Video ansehen</h3>
            <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Klicken zum Abspielen</p>
          </div>
          <div class="play-button-overlay" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="section" id="features">
    <div class="container">
      <div class="section-header text-center mb-4">
        <h2>Transformieren Sie Ihr Unternehmen mit KI</h2>
        <p class="text-large">Wir erfassen alle Systemereignisse, analysieren mit KI und erstellen Automatisierungen in Rekordzeit</p>
      </div>
      
      <div class="grid grid-3">
        <div class="card fade-in">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <h3>Intelligente Aufzeichnung & Analyse</h3>
          <p>Unser System erfasst alle Ereignisse und Aktionen in Ihrem System. Unsere KI analysiert diese Prozesse, um Timelines zu erstellen, repetitive Muster zu erkennen und Engp√§sse zu identifizieren.</p>
        </div>
        
        <div class="card fade-in">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"/>
              <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
              <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
              <path d="M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"/>
              <path d="M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"/>
            </svg>
          </div>
          <h3>Wettbewerbsf√§hige Automatisierung</h3>
          <p>Wir nutzen diese Informationen, um Automatisierungen in Rekordzeit zu erstellen. Zahlen Sie pro Ger√§t plus eine symbolische Geb√ºhr pro Automatisierung f√ºr Cloud-Infrastruktur, f√ºr super wettbewerbsf√§hige Preise.</p>
        </div>
        
        <div class="card fade-in">
          <div class="feature-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3v18h18"/>
              <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
            </svg>
          </div>
          <h3>Wertvolle Einblicke</h3>
          <p>Erhalten Sie wertvolle Einblicke dar√ºber, wo Ihre Mitarbeiter ihre Zeit verbringen. Diese Informationen erm√∂glichen es Ihnen, Entscheidungen zur Verbesserung der Leistung in allen Ihren Operationen zu treffen.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="section">
    <div class="container">
      <div class="section-header text-center mb-4">
        <h2>Wie es funktioniert</h2>
        <p class="text-large">Keine Komplikationen, wir k√ºmmern uns um alles</p>
      </div>
      
      <div class="grid grid-3">
        <div class="process-step fade-in">
          <div class="step-number">1</div>
          <h3>Verbinden & Analysieren</h3>
          <p>Unsere Software erfordert keine Konfiguration - installieren Sie sie einfach und sie beginnt automatisch, Ihre Prozesse zu studieren. Unsere KI analysiert sicher Ihre Prozesse, um Muster und Engp√§sse zu identifizieren.</p>
        </div>
        
        <div class="process-step fade-in">
          <div class="step-number">2</div>
          <h3>Intelligente Empfehlungen erhalten</h3>
          <p>Sobald unser KI-Modell gen√ºgend Informationen hat, erhalten Sie detaillierte Berichte und Automatisierungsempfehlungen, die speziell auf Ihr Unternehmen zugeschnitten sind.</p>
        </div>
        
        <div class="process-step fade-in">
          <div class="step-number">3</div>
          <h3>Empfehlungen anwenden</h3>
          <p>Wenden Sie Automatisierungen unter Ihrer Aufsicht an. Sie k√∂nnen in Echtzeit und vom Handy aus sehen, wie alle Ihre Prozesse laufen. Verpassen Sie keine einzige Dateneinheit mit unseren adaptiven Dashboards.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Value Proposition Section -->
  <section class="section">
    <div class="container">
      <div class="section-header text-center mb-4">
        <h2>Keine Komplikationen, Maximales Ergebnis</h2>
        <p class="text-large">Wir k√ºmmern uns um den gesamten Prozess</p>
      </div>
      
      <div class="grid grid-2">
        <div class="card fade-in">
          <h3>üöÄ Automatische Installation</h3>
          <p>Wir installieren die Software auf Ihren Systemen und unsere KI k√ºmmert sich um die Automatisierung von allem. Sie m√ºssen nichts konfigurieren.</p>
        </div>
        
        <div class="card fade-in">
          <h3>üí∞ Zahlen Sie erst beim Sparen</h3>
          <p>Zahlen Sie nicht, bis Sie anfangen, Zeit Ihrer Mitarbeiter zu sparen. Bis die Automatisierungen funktionieren und Einsparungen generieren, zahlen Sie nichts.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="section section-cta" id="contact">
    <div class="container">
      <div class="cta-content text-center">
        <h2>Bereit, Ihr Unternehmen zu transformieren?</h2>
        <p class="text-large">Schlie√üen Sie sich Unternehmen an, die bereits ihre Prozesse mit KI optimiert haben</p>
        <div class="cta-actions">
          <a href={getNavLink('contact', lang)} class="btn">Kostenlose Analyse starten</a>
          <a href={getNavLink('contact', lang)} class="btn btn-secondary">Demo planen</a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .hero-content {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .hero-title {
    font-size: 4rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }
  
  .hero-subtitle {
    text-align: center;
    margin-bottom: 2rem;
    opacity: 0.9;
  }
  
  .hero-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .section-header {
    max-width: 600px;
    margin: 0 auto;
  }
  
  .feature-icon {
    width: 64px;
    height: 64px;
    background: var(--accent-gradient);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    color: var(--space-white);
  }
  
  .section-cta {
    background: radial-gradient(circle at center, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
  }
  
  .cta-content {
    max-width: 600px;
    margin: 0 auto;
  }
  
  .cta-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 2rem;
  }
  
  @media (max-width: 768px) {
    .hero-title {
      font-size: 2.5rem;
    }
    
    .hero-actions {
      flex-direction: column;
      align-items: center;
    }
    
    .hero-actions .btn {
      width: 100%;
      max-width: 300px;
    }
    
    .cta-actions {
      flex-direction: column;
      align-items: center;
    }
    
    .cta-actions .btn {
      width: 100%;
      max-width: 300px;
    }
  }
  
  /* Animation delays for staggered fade-in */
  .fade-in:nth-child(1) { animation-delay: 0.1s; }
  .fade-in:nth-child(2) { animation-delay: 0.2s; }
  .fade-in:nth-child(3) { animation-delay: 0.3s; }
  .fade-in:nth-child(4) { animation-delay: 0.4s; }
  
  .youtube-placeholder:hover .play-button-overlay {
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%) scale(1.1);
  }
  
  @media (max-width: 768px) {
    .youtube-placeholder {
      width: 100% !important;
      max-width: 560px;
      height: auto !important;
      aspect-ratio: 16/9;
    }
  }
</style>

<script>
  // Lazy load YouTube video only when user clicks
  document.addEventListener('DOMContentLoaded', function() {
    const placeholder = document.getElementById('youtube-placeholder');
    if (!placeholder) return;

    placeholder.addEventListener('click', function() {
      // Check YouTube consent before loading
      if (window.klaro && !window.klaro.getManager().consents.youtube) {
        // Show consent request for YouTube
        window.klaro.getManager().showConsentModal();
        return;
      }
      
      // Create iframe only when clicked and consent given
      const iframe = document.createElement('iframe');
      iframe.width = '560';
      iframe.height = '315';
      iframe.src = 'https://www.youtube-nocookie.com/embed/0hypUiBaT3Q?si=8fWvfSFNjr-paqAy&autoplay=1';
      iframe.title = 'YouTube video player';
      iframe.frameBorder = '0';
      iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
      iframe.referrerPolicy = 'strict-origin-when-cross-origin';
      iframe.allowFullscreen = true;
      iframe.style.borderRadius = '16px';
      
      // Replace placeholder with iframe
      placeholder.parentNode.replaceChild(iframe, placeholder);
      
      // Track video play event for analytics (if consent given)
      if (window.klaro && window.klaro.getManager().consents.googleAnalytics) {
        if (window.gtag) {
          window.gtag('event', 'video_play', {
            'event_category': 'engagement',
            'event_label': 'demo_video'
          });
        }
      }
    });
  });
</script> 