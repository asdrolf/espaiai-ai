---
import Layout from '../../../layouts/Layout.astro';
import FormattedDate from '../../../components/FormattedDate.astro';
import { getCollection } from 'astro:content';
import { getLangFromUrl, useTranslations } from '../../../utils/i18n';

const posts = (await getCollection('blog')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title={`${t('nav.blog')} | ${t('site.title')}`} description={t('site.description')}>
	<section class="section">
		<div class="container">
			<div class="section-header text-center mb-4">
				<h1>Blog</h1>
				<p class="text-large">Perspectives, actualitzacions i lideratge de pensament de l'equip d'Espai.ai</p>
			</div>
			
			<div class="blog-grid">
				{
					posts.map((post) => (
						<article class="blog-card card fade-in">
							<div class="blog-meta">
								<FormattedDate date={post.data.pubDate} />
							</div>
							<h3>
								<a href={`/ca/blog/${post.slug}/`}>{post.data.title}</a>
							</h3>
							<p>{post.data.description}</p>
							<a href={`/ca/blog/${post.slug}/`} class="read-more">Llegir més →</a>
						</article>
					))
				}
			</div>
		</div>
	</section>
</Layout>

<style>
  .blog-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }
  
  .blog-card {
    padding: 2rem;
    transition: transform 0.3s ease;
  }
  
  .blog-card:hover {
    transform: translateY(-5px);
  }
  
  .blog-meta {
    color: var(--accent);
    font-size: 0.875rem;
    margin-bottom: 1rem;
  }
  
  .blog-card h3 {
    margin-bottom: 1rem;
  }
  
  .blog-card h3 a {
    color: var(--space-white);
    text-decoration: none;
    transition: color 0.3s ease;
  }
  
  .blog-card h3 a:hover {
    color: var(--accent);
  }
  
  .blog-card p {
    margin-bottom: 1.5rem;
    opacity: 0.9;
  }
  
  .read-more {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s ease;
  }
  
  .read-more:hover {
    color: var(--space-white);
  }
</style> 